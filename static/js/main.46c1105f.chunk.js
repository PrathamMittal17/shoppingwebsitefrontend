(this.webpackJsonpgrocerywebsite=this.webpackJsonpgrocerywebsite||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},115:function(e,t,n){},122:function(e,t,n){},204:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(23),s=n.n(i),r=(n(105),n(8)),o=(n(106),n(233)),l=n(239),d=n(240),j=n(93),b=n(238),u=n(20),p=n(13),h=n(26),O=Object(h.b)({name:"routeChange",initialState:{route:"loggedout"},reducers:{changeRoute:function(e,t){e.route=t.payload}}}),m=O.actions.changeRoute,x=O.reducer,f=Object(h.b)({name:"loadUser",initialState:{user:{}},reducers:{loadUserAccount:function(e,t){return Object.assign({},e,{user:t.payload})}}}),g=f.actions.loadUserAccount,y=f.reducer,v=n(36),S=n(37),C=(n(115),n(1)),w=a.a.forwardRef((function(e,t){var n=e.children,c=e.onClick;return Object(C.jsxs)("a",{href:"/dropdown",ref:t,onClick:function(e){e.preventDefault(),c(e)},style:{color:"white"},children:[Object(C.jsx)(v.a,{icon:S.e,style:{fontSize:"1.75rem"},className:"hover-border"}),n]})})),I=function(e){var t=e.cartItems,n=Object(p.b)(),c=Object(p.c)((function(e){return e.routeChange.route}));return Object(C.jsx)(d.a,{style:{backgroundColor:"#131921"},variant:"dark",sticky:"top",expand:"sm",children:Object(C.jsxs)(o.a,{children:[Object(C.jsx)(d.a.Brand,{as:u.b,to:"/",children:Object(C.jsxs)("span",{className:"brand-name h4",children:["Thrifty",Object(C.jsx)("span",{className:"box-text",children:"Box"})]})}),Object(C.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(C.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:"loggedin"===c?Object(C.jsxs)(j.a,{className:"ms-auto",style:{gap:"30px",display:"flex",justifyContent:"center",alignItems:"center"},children:[Object(C.jsxs)("div",{style:{display:"flex"},className:"cart",children:[Object(C.jsx)(j.a.Link,{as:u.b,to:"/cart",style:{color:"white"},className:"hover-border",children:Object(C.jsx)(v.a,{icon:S.c,style:{fontSize:"1.75rem"}})}),Object(C.jsx)("span",{style:{fontWeight:"bold",color:"#F08804",marginLeft:"2.5px"},children:t})]}),Object(C.jsxs)(b.a,{children:[Object(C.jsx)(b.a.Toggle,{as:w,id:"dropdown-custom-components"}),Object(C.jsxs)(b.a.Menu,{style:{textAlign:"center",margin:"15px -100px"},children:[Object(C.jsx)(b.a.Item,{as:u.b,to:"/profile",style:{color:"black",fontSize:"18px",padding:"10px"},children:"My Profile"}),Object(C.jsx)(b.a.Item,{as:u.b,style:{color:"black",fontSize:"18px",padding:"10px"},to:"",onClick:function(){n(g(" ")),n(m("loggedout")),localStorage.removeItem("user"),localStorage.removeItem("id")},children:"Sign Out"})]})]})]}):""})]})})},N=n(12),k=n(234),L=n(242),E=n(241),T=function(e){var t=e.id,n=void 0===t?0:t,a=e.image,i=e.productName,s=e.price,r=Object(N.f)(),o=Object(c.useCallback)((function(){r.push("/products/".concat(n))}),[r,n]);return Object(C.jsxs)(E.a,{onClick:function(){return o()},style:{width:"18rem",margin:"20px",borderRadius:"15px",cursor:"pointer"},children:[Object(C.jsx)(E.a.Img,{style:{width:"100%",height:"30vh",objectFit:"scale-down",padding:"10px"},variant:"top",src:a}),Object(C.jsxs)(E.a.Body,{children:[Object(C.jsx)(E.a.Title,{children:i}),Object(C.jsxs)(E.a.Subtitle,{children:["Rs.",s]})]})]})},F=Object(h.b)({name:"changeDisplay",initialState:{display:" "},reducers:{changeDisplay:function(e,t){e.display=t.payload}}}),_=F.actions.changeDisplay,J=F.reducer,P=(n(122),n(95)),R=(n(74),n(16)),q=n.n(R),D=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),s=Object(r.a)(i,2),o=s[0],d=s[1],j=Object(c.useState)(""),b=Object(r.a)(j,2),u=b[0],h=b[1],O=Object(c.useState)(""),x=Object(r.a)(O,2),f=x[0],y=x[1],v=Object(c.useState)(null),S=Object(r.a)(v,2),w=S[0],I=S[1],N=Object(c.useState)(null),k=Object(r.a)(N,2),L=k[0],E=k[1],T=Object(c.useState)(null),F=Object(r.a)(T,2),J=F[0],R=F[1],D=Object(c.useState)(null),A=Object(r.a)(D,2),z=A[0],B=A[1],G=Object(c.useState)("Email can't be empty"),U=Object(r.a)(G,2),M=U[0],K=U[1],Q=Object(c.useState)("Password can't be empty"),X=Object(r.a)(Q,2),Y=X[0],H=X[1],W=Object(p.b)(),Z=Object(c.useState)(null),V=Object(r.a)(Z,2),$=V[0],ee=V[1];return Object(C.jsxs)(l.a,{children:[$?Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:"User already exists please Sign In"})}):"",Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("h4",{children:"Register"})}),Object(C.jsxs)(l.a.Group,{className:"mb-3",controlId:"fname",children:[Object(C.jsx)(l.a.Label,{children:"First Name"}),Object(C.jsx)(l.a.Control,{type:"text",placeholder:"Enter First Name:",onChange:function(e){I(!1),d(e.target.value),ee(!1)}})]}),w?Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:"First Name can't be empty"})}):"",Object(C.jsxs)(l.a.Group,{className:"mb-3",controlId:"lname",children:[Object(C.jsx)(l.a.Label,{children:"Last Name"}),Object(C.jsx)(l.a.Control,{type:"text",placeholder:"Enter Last Name:",onChange:function(e){E(!1),h(e.target.value),ee(!1)}})]}),L?Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:"Last Name can't be empty"})}):"",Object(C.jsxs)(l.a.Group,{className:"mb-3",controlId:"email",children:[Object(C.jsx)(l.a.Label,{children:"Email Address:"}),Object(C.jsx)(l.a.Control,{type:"email",placeholder:"Enter Email Address:",onChange:function(e){R(!1),a(e.target.value),ee(!1)}})]}),J?Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:M})}):"",Object(C.jsxs)(l.a.Group,{className:"mb-3",controlId:"password",children:[Object(C.jsx)(l.a.Label,{children:"Password:"}),Object(C.jsx)(l.a.Control,{type:"password",placeholder:"Enter Password:",onChange:function(e){B(!1),y(e.target.value),ee(!1)}})]}),z?Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:Y})}):"",Object(C.jsx)(l.a.Label,{children:"\u2022 Minimum 6 letters"}),Object(C.jsx)(l.a.Label,{children:"\u2022 Minium 1 Capital Letter "}),Object(C.jsx)(l.a.Label,{children:"\u2022 Minium 1 Symbol"}),Object(C.jsx)(l.a.Label,{children:"\u2022 Minium 1 Number"}),Object(C.jsx)(P.a,{variant:"primary",onClick:function(){q.a.isEmpty(o)&&I(!0),q.a.isEmpty(u)&&E(!0),q.a.isEmpty(n)?(R(!0),K("Email can't be empty")):q.a.isEmail(n)||(R(!0),K("Invalid Email")),q.a.isEmpty(f)?(B(!0),H("Password can't be empty")):q.a.isStrongPassword(f,{minLength:6,minLowercase:1,minNumbers:1,minSymbols:1,minUppercase:1})?w||J||!q.a.isEmail(n)||L||z||!q.a.isStrongPassword(f,{minLength:6,minLowercase:1,minNumbers:1,minSymbols:1,minUppercase:1})||fetch("https://shopping-website-backend.adaptable.app/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({fname:o,lname:u,email:n,password:f})}).then((function(e){return e.json()})).then((function(e){e.id?(W(m("loggedin")),W(_(" ")),W(g(e))):"Unable to register"===e&&ee(!0)})).catch((function(e){return console.log(e)})):(B(!0),H("Invalid Password"))},children:"Register"}),Object(C.jsx)("br",{})]})},A=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(""),s=Object(r.a)(i,2),o=s[0],d=s[1],j=Object(c.useState)(!0),b=Object(r.a)(j,2),u=b[0],h=b[1],O=Object(c.useState)(!0),x=Object(r.a)(O,2),f=x[0],y=x[1],v=Object(c.useState)(""),S=Object(r.a)(v,2),w=S[0],I=S[1],N=Object(c.useState)(""),k=Object(r.a)(N,2),L=k[0],E=k[1],T=Object(c.useState)(!0),F=Object(r.a)(T,2),J=F[0],R=F[1],D=Object(p.b)();return Object(C.jsxs)(l.a,{children:[Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("h4",{children:"Sign In"})}),Object(C.jsxs)(l.a.Group,{className:"mb-3",controlId:"email",children:[Object(C.jsx)(l.a.Label,{children:"Email Address:"}),Object(C.jsx)(l.a.Control,{type:"email",placeholder:"Enter Email Address:",onChange:function(e){h(!1),a(e.target.value),R(!0)}})]}),u?Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:w})}):"",Object(C.jsxs)(l.a.Group,{className:"mb-3",controlId:"password",children:[Object(C.jsx)(l.a.Label,{children:"Password:"}),Object(C.jsx)(l.a.Control,{type:"password",placeholder:"Enter Password:",onChange:function(e){y(!1),d(e.target.value),R(!0)}})]}),f?Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:L})}):"",Object(C.jsx)(P.a,{variant:"primary",onClick:function(){q.a.isEmpty(n)?(h(!0),I("Email can't be empty")):q.a.isEmail(n)||(h(!0),I("Invalid Email")),q.a.isEmpty(o)&&(y(!0),E("Password can't be empty")),u||!q.a.isEmail(n)||q.a.isEmpty(o)||fetch("https://shopping-website-backend.adaptable.app/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})}).then((function(e){return e.json()})).then((function(e){e.id?(D(m("loggedout")),D(_(" ")),D(g(e))):"wrong credentials"===e&&R(!1)})).catch((function(e){return console.log("Request Failed")}))},children:"Sign In"}),Object(C.jsx)("br",{}),J?"":Object(C.jsx)(l.a.Label,{children:Object(C.jsx)("b",{children:"Invalid Login Details"})})]})},z=function(e){var t=e.products,n=e.userId,c=void 0===n?0:n,a=Object(p.c)((function(e){return e.changeDisplay.display})),i=Object(p.b)(),s=Object(C.jsx)(A,{});return"register"===a?(console.log(a),s=Object(C.jsx)(D,{})):"signin"===a&&(s=Object(C.jsx)(A,{})),c?t?Object(C.jsx)("div",{className:"ProductCardList",children:t.map((function(e,n){return Object(C.jsx)(T,{id:t[n].product_id,image:t[n].img,productName:t[n].product_name,price:t[n].price},t[n].product_id)}))}):Object(C.jsx)("div",{style:{textAlign:"center",padding:"100px"},children:Object(C.jsx)(k.a,{animation:"border",role:"status",children:Object(C.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):Object(C.jsxs)("div",{children:[Object(C.jsxs)(L.a,{variant:"primary",style:{textAlign:"center"},children:["Please\u2002",Object(C.jsx)(L.a.Link,{onClick:function(){return i(_("signin"))},children:"Sign In"}),Object(C.jsx)("b",{children:"/"}),Object(C.jsx)(L.a.Link,{onClick:function(){return i(_("register"))},children:"Register"}),"\u2002First"]}),s]})},B=n(72),G=n.n(B),U=n(96),M=Object(h.b)({name:"changeCartTotal",initialState:{total:null},reducers:{IncreaseTotal:function(e){e.total+=1},DecreaseTotal:function(e){e.total-=1},SetTotal:function(e,t){e.total=t.payload}}}),K=M.actions,Q=K.IncreaseTotal,X=K.DecreaseTotal,Y=K.SetTotal,H=M.reducer,W=function(e){var t=e.index,n=e.id,a=e.productName,i=e.price,s=e.img,o=e.quantity,l=e.custId,d=Object(c.useContext)($),j=Object(r.a)(d,2)[1],b=Object(c.useContext)(ee),u=Object(r.a)(b,2),h=u[0],O=u[1],m=Object(p.b)(),x=Object(c.useState)(o),f=Object(r.a)(x,2),g=f[0],y=f[1];Object(c.useEffect)((function(){fetch("https://shopping-website-backend.adaptable.app/updatecartitemqty",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({cartItemId:n,qty:g})}).catch((function(e){return console.log("Request Failed")}))}),[g,n]);return Object(C.jsxs)("div",{children:[Object(C.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(C.jsx)("img",{src:s,alt:"item",style:{margin:"5px",width:"100px",height:"100px",objectFit:"scale-down"}}),Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column",wordBreak:"break-all"},children:[Object(C.jsx)("h3",{style:{margin:"5px"},children:a}),Object(C.jsxs)("h3",{style:{margin:"5px"},children:["Rs.",i*g]})]})]}),Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[Object(C.jsx)(P.a,{size:"sm",variant:"outline-primary",style:{margin:"20px"},onClick:function(){g<4&&(y(g+1),j((function(e){return e+Number(i)})))},children:Object(C.jsx)(v.a,{size:"lg",style:{fontSize:"1rem"},icon:S.b})}),Object(C.jsx)("h4",{children:g}),Object(C.jsx)(P.a,{size:"sm",variant:"outline-primary",style:{margin:"20px"},onClick:function(){g>1&&(y(g-1),j((function(e){return e-Number(i)})))},children:Object(C.jsx)(v.a,{size:"lg",style:{fontSize:"1rem"},icon:S.a})}),Object(C.jsx)(P.a,{size:"md",variant:"outline-danger",style:{margin:"10px"},onClick:function(){h.splice(t,1),O(h),j((function(e){return e-Number(i)*g})),fetch("https://shopping-website-backend.adaptable.app/removecartitem",{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:n})}),fetch("https://shopping-website-backend.adaptable.app/carttotalitems",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:l,operation:"D"})}).then((function(e){return e.json()})).then(m(X()))},children:Object(C.jsx)(v.a,{size:"lg",style:{fontSize:"1rem"},icon:S.d})})]})]})},Z=n(97),V=n(235),$=Object(c.createContext)(),ee=Object(c.createContext)(),te=function(e){var t=e.customerId,n=void 0===t?0:t,a=Object(c.useState)(null),i=Object(r.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(0),j=Object(r.a)(l,2),b=j[0],u=j[1];return Object(c.useEffect)((function(){var e=!0;return fetch("https://shopping-website-backend.adaptable.app/cartitem",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:n})}).then((function(e){return e.json()})).then((function(t){e&&o(t)})).catch((function(e){return console.log("Request Failed")})),function(){e=!1}}),[n]),s?s.length>0?Object(C.jsxs)("div",{children:[Object(C.jsxs)(d.a,{sticky:"top",expand:"lg",style:{display:"flex",justifyContent:"center",backgroundColor:"#131921",padding:"10px"},children:[Object(C.jsxs)("h3",{id:"totalPrice",style:{color:"white"},children:["Total: Rs.",b]}),Object(C.jsx)(P.a,{type:"submit",style:{marginLeft:"10px"},onClick:function(){fetch("https://shopping-website-backend.adaptable.app/create-checkout-session",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*b})}).then((function(e){return e.json()})).then(function(){var e=Object(U.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Z.a)("pk_test_51JmIXVSBM1qtXmvlx74yuerGEmGuKSxOQ7Ej0XDdZrpZQFasZ4XObY9hCWjeQEXA5GDH1QBgPShHtdlKKJBBYCE400KZp54zhq");case 2:e.sent.redirectToCheckout({sessionId:t.id});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Checkout"})]}),Object(C.jsx)(V.a,{style:{padding:"5px"},children:s.map((function(e,t){return 0===b&&u((function(e){return e+s[t].price*s[t].qty})),Object(C.jsx)(V.a.Item,{style:{borderRadius:"15px"},children:Object(C.jsx)($.Provider,{value:[b,u],children:Object(C.jsx)(ee.Provider,{value:[s,o],children:Object(C.jsx)(W,{index:t,id:s[t].cart_item_id,productName:s[t].product_name,price:s[t].price,img:s[t].img,quantity:s[t].qty,custId:n},s[t].cart_item_id)})})},t)}))})]}):0===s.length?Object(C.jsx)("h1",{style:{textAlign:"center"},children:"Cart is empty"}):void 0:Object(C.jsx)("div",{style:{textAlign:"center",padding:"100px"},children:Object(C.jsx)(k.a,{animation:"border",role:"status",children:Object(C.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},ne=n(98),ce=function(e){var t=e.id,n=e.product_name,c=e.qty,a=e.img,i=e.price,s=e.date;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("h3",{children:["Order ID: ",t]}),Object(C.jsxs)("h3",{children:["Purchased on : ",s.slice(0,10)]}),Object(C.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(C.jsx)("img",{src:a,alt:"item",style:{margin:"10px",width:"100px",height:"100px",objectFit:"scale-down"}}),Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column",wordBreak:"break-word"},children:[Object(C.jsx)("h3",{children:n}),Object(C.jsxs)("h3",{children:["Qty:",c]}),Object(C.jsxs)("h3",{children:["Rs.",i]})]})]})]})},ae=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){var e=!0,t=localStorage.getItem("user"),n=JSON.parse(t).id;return fetch("https://shopping-website-backend.adaptable.app/gettingOrder",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({custId:n})}).then((function(e){return e.json()})).then((function(t){e&&a(t)})).catch((function(e){return console.log("Request Failed")})),function(){e=!1}}),[]),n?0===n.length?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h3",{children:"You Have No Orders!"}),Object(C.jsx)(u.b,{to:"/",children:Object(C.jsx)("h2",{style:{textAlign:"center"},children:"Continue Shopping"})})]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h3",{children:"Your Orders:"}),Object(C.jsx)(V.a,{children:n.map((function(e,t){return Object(C.jsx)(ne.a,{style:{borderRadius:"15px"},children:Object(C.jsx)(ce,{id:n[t].order_id,product_name:n[t].product_name,img:n[t].img,price:n[t].price,qty:n[t].qty,date:n[t].date},n[t].order_id)},n[t].order_id)}))})]}):Object(C.jsx)(k.a,{animation:"border",role:"status",children:Object(C.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},ie=function(e){var t=e.Name,n=e.Email;return Object(C.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px"},children:[Object(C.jsxs)("h3",{children:["Name: ",t]}),Object(C.jsxs)("h3",{style:{wordBreak:"break-word"},children:["Email: ",n]}),Object(C.jsx)(ae,{})]})},se=function(e){var t=e.userId,n=void 0===t?0:t;return Object(c.useEffect)((function(){var e={};fetch("https://shopping-website-backend.adaptable.app/cartitem",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:n})}).then((function(e){return e.json()})).then((function(t){Object.assign(e,t),Object.keys(e).map((function(t){return fetch("https://shopping-website-backend.adaptable.app/creatingOrder",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({custId:n,productName:e[t].product_name,qty:e[t].qty,price:e[t].price*e[t].qty,img:e[t].img})})}))})).catch((function(e){return console.log("Request Failed")}))}),[n]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{style:{textAlign:"center"},children:"Your Order Is successful"}),Object(C.jsx)(u.b,{to:"/",children:Object(C.jsx)("h2",{style:{textAlign:"center"},children:"Continue Shopping"})})]})},re=n(99),oe=n(236),le=n(243),de=n(237),je=(n(204),function(e){var t=e.userId,n=Object(N.g)().id,a=Object(c.useState)(null),i=Object(r.a)(a,2),s=i[0],o=i[1],l=Object(c.useState)(!1),d=Object(r.a)(l,2),j=d[0],b=d[1],u=Object(c.useState)([]),h=Object(r.a)(u,2),O=h[0],m=h[1],x=Object(c.useState)(!0),f=Object(r.a)(x,2),g=f[0],y=f[1],v=Object(c.useState)(!1),S=Object(r.a)(v,2),w=S[0],I=S[1],L=Object(p.b)();Object(c.useEffect)((function(){return window.scrollTo(0,0),fetch("https://shopping-website-backend.adaptable.app/getitemcartstatus",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t,productId:n})}).then((function(e){return e.json()})).then((function(e){"T"===e.cart_status?y(!0):y(!1),I(!0)})),fetch("https://shopping-website-backend.adaptable.app/getProductDetailsFull",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n})}).then((function(e){return e.json()})).then((function(e){return o(e)})),fetch("https://shopping-website-backend.adaptable.app/recommend",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n})}).then((function(e){return e.json()})).then((function(e){return Object.values(e).forEach((function(e){fetch("https://shopping-website-backend.adaptable.app/getProductDetailsHalf",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:e})}).then((function(e){return e.json()})).then((function(e){return m((function(t){return[].concat(Object(re.a)(t),[e])}))}))}))})),function(){m([]),o(""),b(!1),I(!1)}}),[n,t]),Object(c.useEffect)((function(){5===O.length&&s&&w&&b(!0)}),[O.length,s,w]);return j?Object(C.jsx)("div",{style:{padding:"20px"},children:Object(C.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[Object(C.jsx)("p",{className:"name",children:s.product_name}),Object(C.jsx)(oe.a,{width:"230px",src:s.img,fluid:!0,alt:"Product Image"}),Object(C.jsxs)("div",{className:"buttons",children:[Object(C.jsxs)("p",{className:"price",children:["Price: Rs.",s.price]}),g?Object(C.jsx)(P.a,{disabled:!0,variant:"dark",children:"Item in Cart"}):Object(C.jsx)(P.a,{disabled:!1,variant:"primary",onClick:function(){y(!0),t&&(fetch("https://shopping-website-backend.adaptable.app/cart",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n,customerId:t,status:"T"})}),fetch("https://shopping-website-backend.adaptable.app/carttotalitems",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t,operation:"I"})}).then((function(e){return e.json()})).then(L(Q())))},children:"Add to Cart"})]}),Object(C.jsxs)(le.a,{defaultActiveKey:"about",id:"uncontrolled-tab-example",className:"mb-3",children:[Object(C.jsx)(de.a,{eventKey:"about",title:"About ",children:Object(C.jsx)("p",{className:"about",children:s.about})}),Object(C.jsx)(de.a,{eventKey:"recommended",title:"More Like This",children:Object(C.jsx)("div",{className:"RecommendedList",children:O.map((function(e){return Object(C.jsx)(T,{id:e.product_id,image:e.img,productName:e.product_name,price:e.price},e.product_id)}))})})]})]})}):Object(C.jsx)("div",{style:{textAlign:"center",padding:"100px"},children:Object(C.jsx)(k.a,{animation:"border",role:"status",children:Object(C.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}),be=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(p.c)((function(e){return e.changeCartTotal.total})),s=Object(p.c)((function(e){return e.loadUser.user})),d=Object(c.useState)(""),j=Object(r.a)(d,2),b=j[0],h=j[1],O=Object(p.b)();Object(c.useEffect)((function(){null!=localStorage.getItem("user")&&O(g(JSON.parse(localStorage.getItem("user")))),fetch("https://shopping-website-backend.adaptable.app/products").then((function(e){return e.json()})).then((function(e){return a(e)})).catch((function(e){return console.log("Request Failed")}))}),[O]),Object(c.useEffect)((function(){s.id&&(O(m("loggedin")),O(_(" ")),localStorage.setItem("user",JSON.stringify({id:s.id,email:s.email,name:s.name})),fetch("https://shopping-website-backend.adaptable.app/getCartTotalItems",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({custId:s.id})}).then((function(e){return e.json()})).then((function(e){return O(Y(e.cart_items))})).catch((function(e){return console.log("Request Failed")})))}),[s,O]);var x=null===n||void 0===n?void 0:n.filter((function(e){return e.product_name.toLowerCase().includes(null===b||void 0===b?void 0:b.toLowerCase())}));return Object(C.jsx)(u.a,{children:Object(C.jsxs)(N.c,{children:[Object(C.jsxs)(N.a,{exact:!0,path:"/",children:[Object(C.jsx)(I,{cartItems:i}),s.id?Object(C.jsx)("div",{style:{position:"fixed",width:"100%",zIndex:"10"},children:Object(C.jsx)(o.a,{children:Object(C.jsx)(l.a,{className:"d-flex",children:Object(C.jsx)(l.a.Control,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search",style:{backgroundColor:"#131921",color:"white"},onChange:function(e){return h(e.target.value)},value:b})})})}):"",Object(C.jsx)(z,{products:x,userId:s.id})]}),Object(C.jsx)(N.a,{path:"/cart",children:Object(C.jsx)(te,{customerId:s.id})}),Object(C.jsx)(N.a,{path:"/profile",children:Object(C.jsx)(ie,{Name:s.name,Email:s.email})}),Object(C.jsx)(N.a,{path:"/orderdone",children:Object(C.jsx)(se,{userId:s.id})}),s.id?Object(C.jsxs)(N.a,{path:"/products/:id",exact:!0,children:[Object(C.jsx)(I,{cartItems:i}),Object(C.jsx)(je,{userId:s.id})]}):""]})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,244)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),i(e),s(e)}))},pe=(n(205),n(227),Object(h.a)({reducer:{loadUser:y,routeChange:x,changeDisplay:J,changeCartTotal:H}}));s.a.render(Object(C.jsx)(p.a,{store:pe,children:Object(C.jsx)(be,{})}),document.getElementById("root")),ue()},74:function(e,t,n){}},[[228,1,2]]]);
//# sourceMappingURL=main.46c1105f.chunk.js.map